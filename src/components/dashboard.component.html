
<div class="max-w-md mx-auto space-y-4">
  
  <!-- Prompt to add API Key -->
  @if (!geminiService.hasApiKey()) {
    <div class="bg-yellow-900/30 border border-yellow-700 text-yellow-200 text-sm rounded-lg p-3 flex flex-col sm:flex-row items-center justify-between gap-3 animate-in fade-in duration-500">
      <div class="flex items-start sm:items-center gap-2">
        <svg class="w-5 h-5 flex-shrink-0 mt-0.5 sm:mt-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" /></svg>
        <span>Gemini AI ချိတ်ဆက်မထားပါ။</span>
      </div>
       <button (click)="goToSettings()" class="bg-yellow-600/20 hover:bg-yellow-600/40 text-white font-bold py-1 px-3 rounded-lg transition-colors whitespace-nowrap text-xs">
        Key ထည့်ရန်
      </button>
    </div>
  }

  <!-- Main Live Display -->
  <div class="text-center p-4 bg-slate-800 rounded-xl border border-slate-700 shadow-xl">
    <div class="flex justify-between items-center">
        <h2 class="text-xl font-bold text-cyan-400/50">V'IP 2D</h2>
        @if(liveMarketData().isLive) {
            <div class="flex items-center gap-2 text-xs text-green-400">
                <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                LIVE
            </div>
        }
    </div>
    <div class="text-9xl font-black text-yellow-400 drop-shadow-[0_5px_15px_rgba(250,204,21,0.4)] my-2">
      {{ liveDerivedData().set2D }}
    </div>
    <p class="text-xs text-slate-500 font-mono">
        {{ liveMarketData().lastUpdated ? 'Updated: ' + liveMarketData().lastUpdated : 'Fetching data...' }}
    </p>
    @if (liveMarketData().error) {
      <p class="text-xs text-yellow-500 mt-2 font-mono animate-pulse">{{ liveMarketData().error }}</p>
    }
  </div>

  <!-- SET and VALUE cards -->
  <div class="grid grid-cols-2 gap-4">
    <div class="bg-slate-800 p-3 rounded-xl border border-slate-700 text-center">
      <p class="text-xs text-slate-400">SET</p>
      <p class="text-2xl font-bold font-mono" [class]="liveDerivedData().isPositive ? 'text-green-400' : 'text-red-400'">{{ liveMarketData().set }}</p>
    </div>
    <div class="bg-slate-800 p-3 rounded-xl border border-slate-700 text-center">
      <p class="text-xs text-slate-400">VALUE</p>
      <p class="text-2xl font-bold font-mono text-slate-300">{{ liveDerivedData().valueModern }}</p>
    </div>
  </div>

  <!-- AM/PM Result cards -->
  <div class="grid grid-cols-2 gap-4">
    <div class="bg-slate-800 p-3 rounded-xl border border-slate-700">
      <p class="text-center text-sm font-bold text-slate-300 mb-2">12:01 PM</p>
      <p class="text-center text-5xl font-bold text-cyan-400">{{ displayRecord().am }}</p>
      <div class="flex justify-between text-xs text-slate-500 font-mono mt-2 pt-2 border-t border-slate-700">
        <span>SET: {{ displayRecord().set }}</span>
      </div>
    </div>
    <div class="bg-slate-800 p-3 rounded-xl border border-slate-700">
      <p class="text-center text-sm font-bold text-slate-300 mb-2">4:30 PM</p>
      <p class="text-center text-5xl font-bold text-purple-400">{{ displayRecord().pm }}</p>
       <div class="flex justify-between text-xs text-slate-500 font-mono mt-2 pt-2 border-t border-slate-700">
        <span>&nbsp;</span>
      </div>
    </div>
  </div>

  <!-- Modern/Internet/TW Prediction Table -->
  <div class="bg-slate-800 rounded-xl border border-slate-700">
    @if(prediction(); as pred) {
      <table class="w-full text-center">
        <thead>
          <tr class="text-slate-400 text-sm">
            <th class="p-2">AI</th>
            <th class="p-2 font-medium">Modern</th>
            <th class="p-2 font-medium">Internet</th>
            <th class="p-2 font-medium">TW</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-t border-slate-700">
            <td class="p-2 text-xs text-slate-400">9:30 AM</td>
            <td class="p-2 text-xl font-bold">{{ pred.highConfidence[0]?.num || '--' }}</td>
            <td class="p-2 text-xl font-bold">{{ pred.highConfidence[1]?.num || '--' }}</td>
            <td class="p-2 text-xl font-bold">{{ pred.highConfidence[2]?.num || '--' }}</td>
          </tr>
          <tr class="border-t border-slate-700">
            <td class="p-2 text-xs text-slate-400">2:00 PM</td>
            <td class="p-2 text-xl font-bold">{{ pred.highConfidence[3]?.num || '--' }}</td>
            <td class="p-2 text-xl font-bold">{{ pred.highConfidence[4]?.num || '--' }}</td>
            <td class="p-2 text-xl font-bold">{{ pred.mediumConfidence[0]?.num || '--' }}</td>
          </tr>
        </tbody>
      </table>
    } @else {
        <div class="p-4 text-center text-xs text-slate-500">AI predictions loading...</div>
    }
  </div>

</div>
